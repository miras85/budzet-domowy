import * as Utils from '../utils.js';
export default {
    props: ['goals', 'savingsAccounts', 'showAddGoal', 'newGoal'],
    emits: ['update:showAddGoal', 'submit-goal', 'delete-goal', 'open-fund', 'open-withdraw', 'open-transfer', 'edit-goal'],
    setup() { return { ...Utils }; },
    template: `
    <div class="px-6">
        <div class="flex justify-between items-center mb-6 mt-4"><h2 class="text-xl font-bold text-white">Cele OszczÄ™dnoÅ›ciowe</h2><button @click="$emit('update:showAddGoal', !showAddGoal)" class="text-blue-400 text-sm font-bold">{{ showAddGoal ? 'Anuluj' : '+ Dodaj' }}</button></div>
        <div v-if="showAddGoal" class="glass-panel p-4 rounded-2xl mb-6"><div class="space-y-3"><input v-model="newGoal.name" placeholder="Nazwa celu" class="input-dark w-full p-3 rounded-xl"><select v-model="newGoal.account_id" class="input-dark w-full p-3 rounded-xl"><option :value="null" disabled>-- Wybierz konto --</option><option v-for="acc in savingsAccounts" :value="acc.id">{{ acc.name }} ({{ formatMoney(acc.balance) }})</option></select><input v-model="newGoal.target_amount" type="number" placeholder="Kwota docelowa" class="input-dark w-full p-3 rounded-xl"><input v-model="newGoal.deadline" type="date" class="input-dark w-full p-3 rounded-xl"><button @click="$emit('submit-goal')" class="w-full bg-blue-600 py-3 rounded-xl font-bold text-sm mt-2">UtwÃ³rz Cel</button></div></div>
        <div class="space-y-4"><div v-for="goal in goals" :key="goal.id" class="glass-panel p-5 rounded-2xl border-l-4 border-green-500 relative overflow-hidden"><div class="flex justify-between items-start mb-2 relative z-10"><div><div class="font-bold text-lg text-white">{{ goal.name }}</div><div class="text-xs text-slate-400">Termin: {{ formatDateShort(goal.deadline) }}</div></div><div class="text-right"><div class="font-bold text-green-400">{{ formatMoney(goal.current_amount) }}</div><div class="text-[10px] text-slate-500">z {{ formatMoney(goal.target_amount) }}</div></div></div><div class="w-full bg-slate-700 h-2 rounded-full mb-2 overflow-hidden relative z-10"><div class="bg-green-500 h-full" :style="{ width: Math.min(100, (goal.current_amount / goal.target_amount) * 100) + '%' }"></div></div><div v-if="goal.current_amount >= goal.target_amount" class="mb-3 text-xs text-green-400 font-bold text-right relative z-10">Cel osiÄ…gniÄ™ty! ğŸ‰</div><div v-else-if="goal.monthly_need > 0" class="flex justify-between items-center mb-3 relative z-10"><div class="text-[10px] text-slate-400 uppercase font-bold">Wymagane w tym cyklu:</div><div class="text-xs font-bold text-yellow-400 bg-yellow-400/10 px-2 py-1 rounded">{{ formatMoney(goal.monthly_need) }}</div></div><div v-else class="mb-3 text-xs text-blue-400 font-bold text-right relative z-10">Plan na ten miesiÄ…c wykonany ğŸ‘</div><div class="flex gap-2 mt-1 relative z-10"><button @click="$emit('open-fund', goal)" class="flex-1 bg-slate-800 py-2 rounded-lg text-xs font-bold text-white border border-slate-700">Zasil</button><button @click="$emit('open-withdraw', goal)" class="flex-1 bg-slate-800 py-2 rounded-lg text-xs font-bold text-white border border-slate-700">WypÅ‚aÄ‡</button><button @click="$emit('open-transfer', goal)" class="flex-1 bg-slate-800 py-2 rounded-lg text-xs font-bold text-white border border-slate-700">PrzenieÅ›</button>
            <button @click="$emit('edit-goal', goal)" class="px-3 bg-slate-800 rounded-lg text-blue-400 font-bold border border-slate-700">âœ</button>
            <button @click="$emit('delete-goal', goal.id)" class="px-3 bg-slate-800 rounded-lg text-red-400 font-bold border border-slate-700">Ã—</button></div></div></div>
    </div>`
}
